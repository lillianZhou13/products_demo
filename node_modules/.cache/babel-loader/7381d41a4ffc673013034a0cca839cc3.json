{"ast":null,"code":"import _objectSpread from \"/Users/fadjsasjdagd/Documents/GitHub/products_demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/fadjsasjdagd/Documents/GitHub/products_demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/fadjsasjdagd/Documents/GitHub/products_demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/fadjsasjdagd/Documents/GitHub/products_demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/fadjsasjdagd/Documents/GitHub/products_demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/fadjsasjdagd/Documents/GitHub/products_demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React, { component } from 'react';\nimport Joi, { errors } from \"joi-browser\";\n\nvar Form = /*#__PURE__*/function (_React$Component) {\n  _inherits(Form, _React$Component);\n\n  function Form() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Form)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {},\n      errors: {}\n    };\n\n    _this.validate = function () {\n      var options = {\n        abortEarly: false\n      };\n\n      var _Joi$validate = Joi.validate(_this.state.data, _this.schema, options),\n          error = _Joi$validate.error;\n\n      if (!error) return null;\n      var errors = {};\n      console.log(\"error.detail,error.detail\");\n      error.details.map(function (item) {\n        return errors[item.path[0]] = item.message;\n      });\n      return errors;\n    };\n\n    _this.validateProperty = function (_ref) {\n      var name = _ref.name,\n          value = _ref.value;\n\n      var obj = _defineProperty({}, name, value);\n\n      var schemaPro = _defineProperty({}, name, _this.schema[name]);\n\n      var _Joi$validate2 = Joi.validate(obj, schemaPro),\n          error = _Joi$validate2.error;\n\n      return error ? error.details[0].message : null;\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      var errors = _this.validate();\n\n      _this.setState({\n        errors: errors || {}\n      });\n\n      if (errors) return;\n      console.log(\"user in handleSubmit\", _this.state.data);\n\n      _this.doSumbit();\n    };\n\n    _this.handleChange = function (e) {\n      var errors = _objectSpread({}, _this.state.errors);\n\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n      var errorMsg = _this.validateProperty({\n        name: name,\n        value: value\n      });\n\n      if (errorMsg) {\n        errors[name] = errorMsg;\n      } else delete errors[name];\n\n      var data = _objectSpread({}, _this.state.data);\n\n      data[name] = value;\n\n      _this.setState({\n        data: data,\n        errors: errors\n      });\n    };\n\n    return _this;\n  }\n\n  return Form;\n}(React.Component);\n\nexport default Form;","map":{"version":3,"sources":["/Users/fadjsasjdagd/Documents/GitHub/products_demo/src/utilities/Form.js"],"names":["React","component","Joi","errors","Form","state","data","validate","options","abortEarly","schema","error","console","log","details","map","item","path","message","validateProperty","name","value","obj","schemaPro","handleSubmit","e","preventDefault","setState","doSumbit","handleChange","target","errorMsg","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACC,OAAOC,GAAP,IAAcC,MAAd,QAA4B,aAA5B;;IACKC,I;;;;;;;;;;;;;;;UACFC,K,GAAQ;AACJC,MAAAA,IAAI,EAAC,EADD;AAEJH,MAAAA,MAAM,EAAC;AAFH,K;;UAIRI,Q,GAAW,YAAI;AACX,UAAMC,OAAO,GAAG;AAACC,QAAAA,UAAU,EAAC;AAAZ,OAAhB;;AADW,0BAEKP,GAAG,CAACK,QAAJ,CAAa,MAAKF,KAAL,CAAWC,IAAxB,EAA6B,MAAKI,MAAlC,EAAyCF,OAAzC,CAFL;AAAA,UAEJG,KAFI,iBAEJA,KAFI;;AAGX,UAAG,CAACA,KAAJ,EAAW,OAAO,IAAP;AACX,UAAMR,MAAM,GAAC,EAAb;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAF,MAAAA,KAAK,CAACG,OAAN,CAAcC,GAAd,CAAkB,UAAAC,IAAI;AAAA,eAAEb,MAAM,CAACa,IAAI,CAACC,IAAL,CAAU,CAAV,CAAD,CAAN,GAAuBD,IAAI,CAACE,OAA9B;AAAA,OAAtB;AACA,aAAOf,MAAP;AAEC,K;;UACJgB,gB,GAAiB,gBAAiB;AAAA,UAAfC,IAAe,QAAfA,IAAe;AAAA,UAATC,KAAS,QAATA,KAAS;;AAC7B,UAAMC,GAAG,uBAAIF,IAAJ,EAAUC,KAAV,CAAT;;AACA,UAAME,SAAS,uBAAKH,IAAL,EAAW,MAAKV,MAAL,CAAYU,IAAZ,CAAX,CAAf;;AAF6B,2BAGdlB,GAAG,CAACK,QAAJ,CAAae,GAAb,EAAiBC,SAAjB,CAHc;AAAA,UAGtBZ,KAHsB,kBAGtBA,KAHsB;;AAI7B,aAAOA,KAAK,GAAGA,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBI,OAApB,GAA4B,IAAxC;AACH,K;;UAEDM,Y,GAAe,UAACC,CAAD,EAAO;AACpBA,MAAAA,CAAC,CAACC,cAAF;;AACA,UAAMvB,MAAM,GAAG,MAAKI,QAAL,EAAf;;AACA,YAAKoB,QAAL,CAAc;AAACxB,QAAAA,MAAM,EAAEA,MAAM,IAAG;AAAlB,OAAd;;AACA,UAAGA,MAAH,EAAW;AACZS,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAmC,MAAKR,KAAL,CAAWC,IAA9C;;AACA,YAAKsB,QAAL;AACD,K;;UAEFC,Y,GAAe,UAACJ,CAAD,EAAO;AAClB,UAAMtB,MAAM,qBAAO,MAAKE,KAAL,CAAWF,MAAlB,CAAZ;;AADkB,sBAEKsB,CAAC,CAACK,MAFP;AAAA,UAEXV,IAFW,aAEXA,IAFW;AAAA,UAEJC,KAFI,aAEJA,KAFI;;AAGlB,UAAMU,QAAQ,GAAG,MAAKZ,gBAAL,CAAsB;AAACC,QAAAA,IAAI,EAAJA,IAAD;AAAMC,QAAAA,KAAK,EAALA;AAAN,OAAtB,CAAjB;;AACA,UAAGU,QAAH,EAAa;AAAC5B,QAAAA,MAAM,CAACiB,IAAD,CAAN,GAAeW,QAAf;AAAyB,OAAvC,MACK,OAAO5B,MAAM,CAACiB,IAAD,CAAb;;AACL,UAAMd,IAAI,qBAAK,MAAKD,KAAL,CAAWC,IAAhB,CAAV;;AACAA,MAAAA,IAAI,CAACc,IAAD,CAAJ,GAAYC,KAAZ;;AACA,YAAKM,QAAL,CAAc;AAACrB,QAAAA,IAAI,EAAJA,IAAD;AAAMH,QAAAA,MAAM,EAANA;AAAN,OAAd;AACH,K;;;;;;EAxCcH,KAAK,CAACgC,S;;AA4CzB,eAAe5B,IAAf","sourcesContent":["import React,{component} from 'react';\n import Joi, { errors } from \"joi-browser\";\nclass Form extends React.Component {\n    state = {\n        data:{},\n        errors:{}\n       };\n    validate = ()=>{\n        const options = {abortEarly:false};\n        const {error} = Joi.validate(this.state.data,this.schema,options);\n        if(!error) return null;\n        const errors={};\n        console.log(\"error.detail,error.detail\");\n        error.details.map(item=>errors[item.path[0]] = item.message);\n        return errors;\n    \n        };\n     validateProperty=({name, value})=>{\n          const obj ={[name]:value};\n          const schemaPro = {[name]:this.schema[name]};\n          const {error}= Joi.validate(obj,schemaPro);\n          return error ? error.details[0].message:null;\n      };\n\n      handleSubmit = (e)  =>{\n        e.preventDefault();\n        const errors = this.validate();\n        this.setState({errors :errors|| {}});\n        if(errors) return;\n       console.log(\"user in handleSubmit\",this.state.data);\n       this.doSumbit();\n     };\n\n    handleChange = (e) => {\n        const errors = {...this.state.errors};\n        const {name , value} = e.target;\n        const errorMsg = this.validateProperty({name,value});\n        if(errorMsg) {errors[name] = errorMsg;}\n        else delete errors[name];\n        const data={...this.state.data};\n        data[name] =value;\n        this.setState({data,errors});\n    }\n    \n}\n \nexport default Form;"]},"metadata":{},"sourceType":"module"}